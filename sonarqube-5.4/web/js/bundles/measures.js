webpackJsonp([15],{0:function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}var n=i(230),l=a(n),r=i(374),s=a(r),o=i(1004),u=a(o),c=i(1006),d=a(c),h=i(1015),f=a(h),p=i(1010),m=a(p),v=i(1017),g=a(v),y=i(1019),w=a(y),b=i(1023),V=a(b),x=i(1025),F=a(x),C=i(1027),k=a(C),D=i(237),_=new s["default"].Application,$=function(){return new d["default"].Filter({name:(0,D.translate)("measure_filter.criteria.last_analysis"),propertyFrom:"ageMinDays",propertyTo:"ageMaxDays",type:V["default"].RangeFilterView,placeholder:(0,D.translate)("measure_filter.criteria.age.days"),enabled:!1,optional:!0})},S=function(e){return new d["default"].Filter({name:(0,D.translate)("measure_filter.criteria.metric"),property:e,type:k["default"],metrics:window.SS.metrics,periods:window.SS.metricPeriods,operations:{eq:"=",lt:"<",lte:"≤",gt:">",gte:"≥"},enabled:!1,optional:!0})},M=function(){return new d["default"].Filter({name:(0,D.translate)("measure_filter.name_contains"),property:"nameSearch",type:F["default"],enabled:!1,optional:!0})},O=function(){return new d["default"].Filter({name:(0,D.translate)("measure_filter.criteria.alert"),property:"alertLevels[]",type:m["default"].ChoiceFilterView,enabled:!1,optional:!0,choices:{error:(0,D.translate)("measure_filter.criteria.alert.error"),warn:(0,D.translate)("measure_filter.criteria.alert.warn"),ok:(0,D.translate)("measure_filter.criteria.alert.ok")}})},j=function(){_.addRegions({filtersRegion:".navigator-filters"}),this.filters=new d["default"].Filters,l["default"].isObject(window.SS.favorites)&&this.filters.add([new d["default"].Filter({type:w["default"].FavoriteFilterView,enabled:!0,optional:!1,choices:window.SS.favorites,favoriteUrl:"/measures/filter",manageUrl:"/measures/manage"})]),this.filters.add([new d["default"].Filter({name:(0,D.translate)("measure_filter.criteria.components"),property:"qualifiers[]",type:m["default"].ChoiceFilterView,enabled:!0,optional:!1,choices:window.SS.qualifiers,defaultValue:(0,D.translate)("any")}),new d["default"].Filter({name:(0,D.translate)("measure_filter.criteria.components_of"),property:"base",type:g["default"].ComponentFilterView,multiple:!1,enabled:!1,optional:!0}),new d["default"].Filter({name:(0,D.translate)("measure_filter.criteria.only_favorites"),property:"onFavourites",type:f["default"],enabled:!1,optional:!0}),new d["default"].Filter({name:(0,D.translate)("measure_filter.criteria.date"),propertyFrom:"fromDate",propertyTo:"toDate",type:V["default"].DateRangeFilterView,enabled:!1,optional:!0}),new d["default"].Filter({name:(0,D.translate)("measure_filter.criteria.key_contains"),property:"keySearch",type:F["default"],enabled:!1,optional:!0})]),this.filters.add([$(),S("c3"),S("c2"),S("c1"),M(),O()]),this.filterBarView=new u["default"]({collection:this.filters,extra:{sort:"",asc:!1}}),this.filtersRegion.show(this.filterBarView),window.queryParams&&_.filterBarView.restoreFromQuery(window.queryParams),key.setScope("list")};_.on("start",function(){j.call(_)}),window.sonarqube.appStarted.then(function(e){return _.start(e)})},237:function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}function n(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}function l(e){return Array.isArray(e)?e:Array.from(e)}function r(){for(var e=arguments.length,t=Array(e),i=0;e>i;i++)t[i]=arguments[i];var a=t.join(".");return y[a]||a}function s(e){for(var t=y[e],i=arguments.length,a=Array(i>1?i-1:0),n=1;i>n;n++)a[n-1]=arguments[n];return t?a.reduce(function(e,t,i){return e.replace("{"+i+"}",t)},t):e+"."+a.join(".")}function o(){var e=window.navigator.languages?window.navigator.languages[0]:window.navigator.language,t=e.split("-"),i=l(t),a=i[0],r=i.slice(1);return[a.toLowerCase()].concat(n(r.map(function(e){return e.toUpperCase()}))).join("_")}function u(e){var t=window.baseUrl+"/api/l10n/index?"+(0,p.stringify)(e);return fetch(t,{credentials:"same-origin"}).then(function(e){if(304===e.status)return JSON.parse(localStorage.getItem("l10n.bundle"));if(200===e.status)return e.json();throw new Error(e.status)})}function c(){var e=o(),t=localStorage.getItem("l10n.locale");t!==e&&localStorage.removeItem("l10n.timestamp");var i=localStorage.getItem("l10n.timestamp"),a={locale:e};return null!==i&&(a.ts=i),u(a).then(function(t){var i=(0,v["default"])().format("YYYY-MM-DDTHH:mm:ssZZ");localStorage.setItem("l10n.timestamp",i),localStorage.setItem("l10n.locale",e),localStorage.setItem("l10n.bundle",JSON.stringify(t)),y=t})}function d(e){y=e}function h(){window.t=r,window.tp=s,window.requestMessages=c}function f(e){var t="dashboard."+e+".name",i=r(t);return i!==t?i:e}Object.defineProperty(t,"__esModule",{value:!0}),t.translate=r,t.translateWithParameters=s,t.requestMessages=c,t.resetBundle=d,t.installGlobal=h,t.getLocalizedDashboardName=f;var p=i(238),m=i(241),v=a(m),g=i(230),y=(a(g),{})},238:function(e,t,i){"use strict";t.decode=t.parse=i(239),t.encode=t.stringify=i(240)},239:function(e,t){"use strict";function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,a,n){t=t||"&",a=a||"=";var l={};if("string"!=typeof e||0===e.length)return l;var r=/\+/g;e=e.split(t);var s=1e3;n&&"number"==typeof n.maxKeys&&(s=n.maxKeys);var o=e.length;s>0&&o>s&&(o=s);for(var u=0;o>u;++u){var c,d,h,f,p=e[u].replace(r,"%20"),m=p.indexOf(a);m>=0?(c=p.substr(0,m),d=p.substr(m+1)):(c=p,d=""),h=decodeURIComponent(c),f=decodeURIComponent(d),i(l,h)?Array.isArray(l[h])?l[h].push(f):l[h]=[l[h],f]:l[h]=f}return l}},240:function(e,t){"use strict";var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,a,n){return t=t||"&",a=a||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(n){var l=encodeURIComponent(i(n))+a;return Array.isArray(e[n])?e[n].map(function(e){return l+encodeURIComponent(i(e))}).join(t):l+encodeURIComponent(i(e[n]))}).join(t):n?encodeURIComponent(i(n))+a+encodeURIComponent(i(e)):""}},395:function(e,t){"use strict";e.exports=function(){var e=Array.prototype.slice.call(arguments,0,-1);return window.t.apply(this,e)}},1004:function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(333),l=a(n),r=i(1005),s=a(r);t["default"]=s["default"].extend({template:function(){return(0,l["default"])("#filter-bar-template").html()}})},1005:function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(333),l=a(n),r=i(230),s=a(r),o=i(374),u=a(o),c=i(1006),d=a(c),h=i(1009),f=a(h);t["default"]=u["default"].CompositeView.extend({childViewContainer:".navigator-filters-list",collectionEvents:{"change:enabled":"changeEnabled"},getChildView:function(e){return e.get("type")||d["default"].BaseFilterView},childViewOptions:function(){return{filterBarView:this,app:this.options.app}},initialize:function(){u["default"].CompositeView.prototype.initialize.apply(this,arguments);var e=this;(0,l["default"])("body").on("click",function(){e.hideDetails()}),this.addMoreCriteriaFilter(),key.filter=function(e){var t=!0,i=(0,l["default"])(e.target),a=i.closest(".navigator-filter-details-inner"),n=a.find(":tabbable"),r=i.is(":input")||i.is("a"),s=i.closest(".ui-dialog").length>0;return r&&(t=s||9!==e.keyCode&&27!==e.keyCode?!1:n.index(i)>=n.length-1),t},key("tab","list",function(){return key.setScope("filters"),e.selectFirst(),!1}),key("shift+tab","filters",function(){return e.selectPrev(),!1}),key("tab","filters",function(){return e.selectNext(),!1}),key("escape","filters",function(){e.hideDetails(),this.selected=-1,key.setScope("list")})},getEnabledFilters:function(){return this.$(this.childViewContainer).children().not(".navigator-filter-disabled").not(".navigator-filter-inactive").not(".navigator-filter-favorite")},selectFirst:function(){this.selected=-1,this.selectNext()},selectPrev:function(){var e=this.getEnabledFilters();this.selected>0&&(e.eq(this.selected).blur(),this.selected--,e.eq(this.selected).click(),this.$(".navigator-filter-submit").blur())},selectNext:function(){var e=this.getEnabledFilters();this.selected<e.length-1?(e.eq(this.selected).blur(),this.selected++,e.eq(this.selected).click()):(this.selected=e.length,this.hideDetails(),this.$(".navigator-filter-submit").focus())},addMoreCriteriaFilter:function(){var e=this.collection.where({enabled:!1});e.length>0&&(this.moreCriteriaFilter=new d["default"].Filter({type:f["default"].MoreCriteriaFilterView,enabled:!0,optional:!1,filters:e}),this.collection.add(this.moreCriteriaFilter))},onAddChild:function(e){e.model.get("type")===f["default"].FavoriteFilterView&&(0,l["default"])(".navigator-header").addClass("navigator-header-favorite")},restoreFromQuery:function(e){this.collection.each(function(t){t.set("enabled",!t.get("optional")),t.view.clear(),t.view.restoreFromQuery(e)})},hideDetails:function(){s["default"].isObject(this.showedView)&&this.showedView.hideDetails()},enableFilter:function(e){var t=this.collection.get(e),i=t.view;i.$el.detach().insertBefore(this.$(".navigator-filter-more-criteria")),t.set("enabled",!0),i.showDetails()},changeEnabled:function(){var e=s["default"].reject(this.collection.where({enabled:!1}),function(e){return e.get("type")===f["default"].MoreCriteriaFilterView});0===e.length?this.moreCriteriaFilter.set({enabled:!1},{silent:!0}):this.moreCriteriaFilter.set({enabled:!0},{silent:!0}),this.moreCriteriaFilter.set("filters",e)}})},1006:function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(333),l=a(n),r=i(230),s=a(r),o=i(372),u=a(o),c=i(374),d=a(c),h=i(1007),f=a(h),p=i(1008),m=a(p),v=u["default"].Model.extend({defaults:{enabled:!0,optional:!1,multiple:!0,placeholder:""}}),g=u["default"].Collection.extend({model:v}),y=d["default"].ItemView.extend({template:m["default"],className:"navigator-filter-details",initialize:function(){this.$el.on("click",function(e){e.stopPropagation()}),this.$el.attr("id","filter-"+this.model.get("property"))},onShow:function(){},onHide:function(){}}),w=d["default"].ItemView.extend({template:f["default"],className:"navigator-filter",events:function(){return{click:"toggleDetails","click .navigator-filter-disable":"disable"}},modelEvents:{"change:enabled":"focus","change:value":"renderBase","change:filters":"render"},initialize:function(e){d["default"].ItemView.prototype.initialize.apply(this,arguments);var t=e&&e.detailsView||y;this.detailsView=new t({model:this.model,filterView:this}),this.model.view=this},attachDetailsView:function(){this.detailsView.$el.detach().appendTo((0,l["default"])("body"))},render:function(){this.renderBase(),this.attachDetailsView(),this.detailsView.render(),this.$el.toggleClass("navigator-filter-disabled",!this.model.get("enabled")),this.$el.toggleClass("navigator-filter-optional",this.model.get("optional"))},renderBase:function(){d["default"].ItemView.prototype.render.apply(this,arguments),this.renderInput();var e=this.model.get("name")+": "+this.renderValue();this.$el.prop("title",e),this.$el.attr("data-property",this.model.get("property"))},renderInput:function(){},focus:function(){this.render()},toggleDetails:function(e){e.stopPropagation(),this.options.filterBarView.selected=this.options.filterBarView.getEnabledFilters().index(this.$el),this.$el.hasClass("active")?(key.setScope("list"),this.hideDetails()):(key.setScope("filters"),this.showDetails())},showDetails:function(){this.registerShowedDetails();var e=this.$el.offset().top+this.$el.outerHeight()-1,t=this.$el.offset().left;this.detailsView.$el.css({top:e,left:t}).addClass("active"),this.$el.addClass("active"),this.detailsView.onShow()},registerShowedDetails:function(){this.options.filterBarView.hideDetails(),this.options.filterBarView.showedView=this},hideDetails:function(){this.detailsView.$el.removeClass("active"),this.$el.removeClass("active"),this.detailsView.onHide()},isActive:function(){return this.$el.is(".active")},renderValue:function(){return this.model.get("value")||"unset"},isDefaultValue:function(){return!0},restoreFromQuery:function(e){var t=s["default"].findWhere(e,{key:this.model.get("property")});t&&t.value?(this.model.set("enabled",!0),this.restore(t.value,t)):this.clear()},restore:function(e){this.model.set({value:e},{silent:!0}),this.renderBase()},clear:function(){this.model.unset("value")},disable:function(e){e.stopPropagation(),this.hideDetails(),this.options.filterBarView.hideDetails(),this.model.set({enabled:!1,value:null})},formatValue:function(){var e={};return this.model.has("property")&&this.model.has("value")&&this.model.get("value")&&(e[this.model.get("property")]=this.model.get("value")),e},serializeData:function(){return s["default"].extend({},this.model.toJSON(),{value:this.renderValue(),defaultValue:this.isDefaultValue()})}});t["default"]={Filter:v,Filters:g,BaseFilterView:w,DetailsFilterView:y}},1007:function(e,t,i){var a=i(387);e.exports=(a["default"]||a).template({1:function(e,t,i,a){return"default"},3:function(e,t,i,a){return'  <div class="navigator-filter-disable">&times;</div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,a){var n,l,r="function",s=t.helperMissing,o=this.escapeExpression,u='<div class="navigator-filter-label">'+o((l=null!=(l=t.name||(null!=e?e.name:e))?l:s,typeof l===r?l.call(e,{name:"name",hash:{},data:a}):l))+'</div>\n<div class="navigator-filter-value ';return n=t["if"].call(e,null!=e?e.defaultValue:e,{name:"if",hash:{},fn:this.program(1,a),inverse:this.noop,data:a}),null!=n&&(u+=n),u+='">'+o((l=null!=(l=t.value||(null!=e?e.value:e))?l:s,typeof l===r?l.call(e,{name:"value",hash:{},data:a}):l))+"</div>\n",n=t["if"].call(e,null!=e?e.optional:e,{name:"if",hash:{},fn:this.program(3,a),inverse:this.noop,data:a}),null!=n&&(u+=n),u},useData:!0})},1008:function(e,t,i){var a=i(387);e.exports=(a["default"]||a).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,a){return'<div class="navigator-filter-details-inner"></div>\n'},useData:!0})},1009:function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(333),l=a(n),r=i(230),s=a(r),o=i(1010),u=a(o),c=i(1013),d=a(c),h=i(1014),f=a(h),p=u["default"].DetailsChoiceFilterView.extend({template:f["default"],events:{"click label[data-id]:not(.inactive)":"enableFilter"},enableById:function(e){this.model.view.options.filterBarView.enableFilter(e),this.model.view.hideDetails()},enableByProperty:function(e){var t=s["default"].find(this.model.get("filters"),function(t){return t.get("property")===e});t&&this.enableById(t.cid)},enableFilter:function(e){var t=(0,l["default"])(e.target).data("id");this.enableById(t),this.updateCurrent(0)},selectCurrent:function(){this.$("label").eq(this.currentChoice).click()},serializeData:function(){var e=this.model.get("filters").map(function(e){return s["default"].extend(e.toJSON(),{id:e.cid})}),t=function(e){return e.name},i=s["default"].unique(e,t),a=s["default"].sortBy(i,t);return s["default"].extend(this.model.toJSON(),{filters:a})}}),m=u["default"].ChoiceFilterView.extend({template:d["default"],className:"navigator-filter navigator-filter-more-criteria",initialize:function(){u["default"].ChoiceFilterView.prototype.initialize.call(this,{detailsView:p})},renderValue:function(){return""},renderInput:function(){},renderBase:function(){u["default"].ChoiceFilterView.prototype.renderBase.call(this),this.$el.prop("title","")},isDefaultValue:function(){return!1}});t["default"]={DetailsMoreCriteriaFilterView:p,MoreCriteriaFilterView:m}},1010:function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(333),l=a(n),r=i(230),s=a(r),o=i(372),u=a(o),c=i(1006),d=a(c),h=i(1011),f=a(h),p=i(1012),m=a(p),v=i(237),g=d["default"].DetailsFilterView.extend({template:f["default"],itemTemplate:m["default"],events:function(){return{"click label":"onCheck"}},render:function(){d["default"].DetailsFilterView.prototype.render.apply(this,arguments),this.updateLists()},renderList:function(e,t){var i=this,a=this.$(t);a.empty().toggleClass("hidden",0===e.length),e.each(function(e){a.append(i.itemTemplate(s["default"].extend(e.toJSON(),{multiple:i.model.get("multiple")&&"!"!==e.get("id")[0]})))})},updateLists:function(){var e=new u["default"].Collection(this.options.filterView.choices.reject(function(e){return"!"===e.get("id")[0]})),t=new u["default"].Collection(this.options.filterView.choices.filter(function(e){return"!"===e.get("id")[0]}));this.renderList(e,".choices"),this.renderList(t,".opposite");var i=this.currentChoice||0;this.updateCurrent(i)},onCheck:function(e){var t=(0,l["default"])(e.currentTarget),i=t.data("id"),a=t.find(".icon-checkbox-checked").length>0;this.model.get("multiple")?t.closest(".opposite").length>0?this.options.filterView.choices.each(function(e){e.set("checked",!1)}):this.options.filterView.choices.filter(function(e){return"!"===e.get("id")[0]}).forEach(function(e){e.set("checked",!1)}):this.options.filterView.choices.each(function(e){e.set("checked",!1)}),this.options.filterView.choices.get(i).set("checked",!a),this.updateValue(),this.updateLists()},updateValue:function(){this.model.set("value",this.options.filterView.getSelected().map(function(e){return e.get("id")}))},updateCurrent:function(e){this.currentChoice=e,this.$("label").removeClass("current").eq(this.currentChoice).addClass("current")},onShow:function(){this.bindedOnKeyDown=s["default"].bind(this.onKeyDown,this),(0,l["default"])("body").on("keydown",this.bindedOnKeyDown)},onHide:function(){(0,l["default"])("body").off("keydown",this.bindedOnKeyDown)},onKeyDown:function(e){switch(e.keyCode){case 38:e.preventDefault(),this.selectPrevChoice();break;case 40:e.preventDefault(),this.selectNextChoice();break;case 13:e.preventDefault(),this.selectCurrent()}},selectNextChoice:function(){this.$("label").length>this.currentChoice+1&&(this.updateCurrent(this.currentChoice+1),this.scrollNext())},scrollNext:function(){var e=this.$("label").eq(this.currentChoice);if(e.length>0){var t=e.closest("ul"),i=e.offset().top-t.offset().top+t.scrollTop(),a=i-t.height()+e.outerHeight();a>0&&t.scrollTop(a)}},selectPrevChoice:function(){this.currentChoice>0&&(this.updateCurrent(this.currentChoice-1),this.scrollPrev())},scrollPrev:function(){var e=this.$("label").eq(this.currentChoice);if(e.length>0){var t=e.closest("ul"),i=e.offset().top-t.offset().top;0>i&&t.scrollTop(t.scrollTop()+i)}},selectCurrent:function(){var e=this.$("label").eq(this.currentChoice);e.click()},serializeData:function(){return s["default"].extend({},this.model.toJSON(),{choices:new u["default"].Collection(this.options.filterView.choices.reject(function(e){return"!"===e.get("id")[0]})).toJSON(),opposite:new u["default"].Collection(this.options.filterView.choices.filter(function(e){return"!"===e.get("id")[0]})).toJSON()})}}),y=d["default"].BaseFilterView.extend({initialize:function(e){d["default"].BaseFilterView.prototype.initialize.call(this,{detailsView:e&&e.detailsView?e.detailsView:g});var t=0,i=this.model.get("choiceIcons");this.choices=new u["default"].Collection(s["default"].map(this.model.get("choices"),function(e,a){var n=new u["default"].Model({id:a,text:e,checked:!1,index:t++});return i&&i[a]&&n.set("icon",i[a]),n}),{comparator:"index"})},getSelected:function(){return this.choices.filter(function(e){return e.get("checked")})},renderInput:function(){var e=(0,l["default"])("<select>").prop("name",this.model.get("property")).prop("multiple",!0).css("display","none");this.choices.each(function(t){var i=(0,l["default"])("<option>").prop("value",t.get("id")).prop("selected",t.get("checked")).text(t.get("text"));i.appendTo(e)}),e.appendTo(this.$el)},renderValue:function(){var e=this.getSelected().map(function(e){return e.get("text")}),t=this.model.has("defaultValue")?this.model.get("defaultValue"):this.model.get("multiple")?(0,v.translate)("all"):(0,v.translate)("any");return this.isDefaultValue()?t:e.join(", ")},isDefaultValue:function(){var e=this.getSelected();return 0===e.length},disable:function(){this.choices.each(function(e){e.set("checked",!1)}),d["default"].BaseFilterView.prototype.disable.apply(this,arguments)},restoreFromQuery:function(e){var t=s["default"].findWhere(e,{key:this.model.get("property")});this.choices&&this.choices.forEach(function(i){if("!"===i.get("id")[0]){var a=s["default"].findWhere(e,{key:i.get("id").substr(1)});if(i.get("id").indexOf("=")>=0){var n=i.get("id").split("=")[0].substr(1),l=i.get("id").split("=")[1];a=s["default"].findWhere(e,{key:n,value:l})}if(null==a)return;t?t.value+=","+i.get("id"):t={value:i.get("id")}}}),t&&t.value?(this.model.set("enabled",!0),this.restore(t.value,t)):this.clear()},restore:function(e){if(s["default"].isString(e)&&(e=e.split(",")),this.choices&&e.length>0){var t=this;t.choices.each(function(e){e.set("checked",!1)});var i=[];s["default"].each(e,function(e){var a=t.choices.findWhere({id:e});a?a.set("checked",!0):i.push(e)}),e=s["default"].difference(e,i),this.model.set({value:e,enabled:!0}),this.render()}else this.clear()},clear:function(){this.choices&&this.choices.each(function(e){e.set("checked",!1)}),this.model.unset("value"),this.detailsView.render(),this.detailsView.updateCurrent&&this.detailsView.updateCurrent(0)},formatValue:function(){var e={};if(this.model.has("property")&&this.model.has("value")&&this.model.get("value").length>0){var t=s["default"].filter(this.model.get("value"),function(e){return"!"===e[0]});t.length>0?t.forEach(function(t){if(t.indexOf("=")>=0){var i=t.split("=");e[i[0].substr(1)]=i[1]}else e[t.substr(1)]=!1}):e[this.model.get("property")]=this.model.get("value").join(",")}return e}});t["default"]={DetailsChoiceFilterView:g,ChoiceFilterView:y}},1011:function(e,t,i){var a=i(387);e.exports=(a["default"]||a).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,a){return'<ul class="navigator-filter-select-list choices"></ul>\n<ul class="navigator-filter-select-list opposite"></ul>\n'},useData:!0})},1012:function(e,t,i){var a=i(387);e.exports=(a["default"]||a).template({1:function(e,t,i,a){return"icon-checkbox-checked"},3:function(e,t,i,a){return"icon-checkbox-single"},5:function(e,t,i,a){var n,l="function",r=t.helperMissing,s=this.escapeExpression;return'<i class="icon-'+s((n=null!=(n=t.icon||(null!=e?e.icon:e))?n:r,typeof n===l?n.call(e,{name:"icon",hash:{},data:a}):n))+'"></i>'},7:function(e,t,i,a){var n,l="function",r=t.helperMissing,s=this.escapeExpression;return'      <br>\n      <span>\n        <i class="icon-checkbox icon-checkbox-invisible"></i>\n        <span class="note">'+s((n=null!=(n=t.category||(null!=e?e.category:e))?n:r,typeof n===l?n.call(e,{name:"category",hash:{},data:a}):n))+"</span>\n      </span>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,a){var n,l,r="function",s=t.helperMissing,o=this.escapeExpression,u='<li>\n  <label title="'+o((l=null!=(l=t.text||(null!=e?e.text:e))?l:s,typeof l===r?l.call(e,{name:"text",hash:{},data:a}):l))+'" data-id="'+o((l=null!=(l=t.id||(null!=e?e.id:e))?l:s,typeof l===r?l.call(e,{name:"id",hash:{},data:a}):l))+'">\n    <span>\n      <i class="icon-checkbox ';return n=t["if"].call(e,null!=e?e.checked:e,{name:"if",hash:{},fn:this.program(1,a),inverse:this.noop,data:a}),null!=n&&(u+=n),u+=" ",n=t.unless.call(e,null!=e?e.multiple:e,{name:"unless",hash:{},fn:this.program(3,a),inverse:this.noop,data:a}),null!=n&&(u+=n),u+='"></i>\n      ',n=t["if"].call(e,null!=e?e.icon:e,{name:"if",hash:{},fn:this.program(5,a),inverse:this.noop,data:a}),null!=n&&(u+=n),u+="\n      "+o((l=null!=(l=t.text||(null!=e?e.text:e))?l:s,typeof l===r?l.call(e,{name:"text",hash:{},data:a}):l))+"\n    </span>\n",n=t["if"].call(e,null!=e?e.category:e,{name:"if",hash:{},fn:this.program(7,a),inverse:this.noop,data:a}),null!=n&&(u+=n),u+"  </label>\n</li>\n"},useData:!0})},1013:function(e,t,i){var a=i(387);e.exports=(a["default"]||a).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,a,n){var l=this.escapeExpression;return l(i(395).call(e,"moreCriteria",{name:"t",hash:{},data:n}))+"\n"},useData:!0})},1014:function(e,t,i){var a=i(387);e.exports=(a["default"]||a).template({1:function(e,t,i,a){var n,l,r="function",s=t.helperMissing,o=this.escapeExpression,u='    <li>\n      <label data-id="'+o((l=null!=(l=t.id||(null!=e?e.id:e))?l:s,typeof l===r?l.call(e,{name:"id",hash:{},data:a}):l))+'" data-property="'+o((l=null!=(l=t.property||(null!=e?e.property:e))?l:s,typeof l===r?l.call(e,{name:"property",hash:{},data:a}):l))+'" ';return n=t["if"].call(e,null!=e?e.inactive:e,{name:"if",hash:{},fn:this.program(2,a),inverse:this.noop,data:a}),null!=n&&(u+=n),u+=" ",n=t["if"].call(e,null!=e?e.title:e,{name:"if",hash:{},fn:this.program(4,a),inverse:this.noop,data:a}),null!=n&&(u+=n),u+">\n        "+o((l=null!=(l=t.name||(null!=e?e.name:e))?l:s,typeof l===r?l.call(e,{name:"name",hash:{},data:a}):l))+"\n      </label>\n    </li>\n"},2:function(e,t,i,a){return'class="inactive"'},4:function(e,t,i,a){var n,l="function",r=t.helperMissing,s=this.escapeExpression;return'title="'+s((n=null!=(n=t.title||(null!=e?e.title:e))?n:r,typeof n===l?n.call(e,{name:"title",hash:{},data:a}):n))+'"'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,a){var n,l='<ul class="navigator-filter-select-list">\n';return n=t.each.call(e,null!=e?e.filters:e,{name:"each",hash:{},fn:this.program(1,a),inverse:this.noop,data:a}),null!=n&&(l+=n),l+"</ul>\n"},useData:!0})},1015:function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(333),l=a(n),r=i(1006),s=a(r),o=i(1016),u=a(o);t["default"]=s["default"].BaseFilterView.extend({template:u["default"],className:"navigator-filter navigator-filter-inline",events:function(){return{"click .navigator-filter-disable":"disable"}},showDetails:function(){},renderInput:function(){this.model.get("enabled")&&(0,l["default"])("<input>").prop("name",this.model.get("property")).prop("type","checkbox").prop("value","true").prop("checked",!0).css("display","none").appendTo(this.$el)},renderValue:function(){return this.model.get("value")},isDefaultValue:function(){return!1},restore:function(e){this.model.set({value:e,enabled:!0})}})},1016:function(e,t,i){var a=i(387);e.exports=(a["default"]||a).template({1:function(e,t,i,a){return'  <div class="navigator-filter-disable">&times;</div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,a){var n,l,r="function",s=t.helperMissing,o=this.escapeExpression,u='<div class="navigator-filter-label">'+o((l=null!=(l=t.name||(null!=e?e.name:e))?l:s,typeof l===r?l.call(e,{name:"name",hash:{},data:a}):l))+"</div>\n";return n=t["if"].call(e,null!=e?e.optional:e,{name:"if",hash:{},fn:this.program(1,a),inverse:this.noop,data:a}),null!=n&&(u+=n),u},useData:!0})},1017:function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(333),l=a(n),r=i(230),s=a(r),o=i(372),u=a(o),c=i(1006),d=a(c),h=i(1010),f=a(h),p=i(1018),m=a(p),v=i(1012),g=a(v),y=100,w=u["default"].Collection.extend({comparator:"text",initialize:function(){this.more=!1,this.page=0},parse:function(e){return this.more=e.more,e.results},fetch:function(e){this.data=s["default"].extend({p:1,ps:y},e.data||{});var t=s["default"].extend({},e,{data:this.data});return u["default"].Collection.prototype.fetch.call(this,t)},fetchNextPage:function(e){if(this.more){this.data.p+=1;var t=s["default"].extend({remove:!1},e,{data:this.data});return this.fetch(t)}return!1}}),b=w.extend({url:function(){return baseUrl+"/api/users/search"},parse:function(e){var t=window.usersToSelect2(e);this.more=t.more,this.results=t.results}}),V=w.extend({url:function(){return baseUrl+"/api/resources/search?f=s2&q=TRK&display_key=true"}}),x=w.extend({url:function(){return baseUrl+"/api/resources/search?f=s2&qp=supportsGlobalDashboards&display_key=true"},parse:function(e){if(this.more=e.more,e.results.length>0&&e.results[0].children){var t=[];return s["default"].each(e.results,function(e){s["default"].each(e.children,function(i){i.category=e.text,t.push(i)})}),t}return e.results}}),F=f["default"].DetailsChoiceFilterView.extend({template:m["default"],listTemplate:g["default"],searchKey:"s",render:function(){f["default"].DetailsChoiceFilterView.prototype.render.apply(this,arguments);var e=this,t=function(t){37!==t.keyCode&&38!==t.keyCode&&39!==t.keyCode&&40!==t.keyCode&&e.search()},i=s["default"].debounce(t,250),a=function(){e.scroll()},n=s["default"].throttle(a,1e3);this.$(".navigator-filter-search input").off("keyup keydown").on("keyup",i).on("keydown",this.keydown),this.$(".choices").off("scroll").on("scroll",n)},search:function(){var e=this;if(this.query=this.$(".navigator-filter-search input").val(),this.query.length>1){this.$el.addClass("fetching");var t=e.options.filterView.getSelected(),i={ps:y};i[this.searchKey]=this.query,this.options.filterView.choices.fetch({data:i,success:function(){t.forEach(function(t){e.options.filterView.choices.unshift(t)}),s["default"].each(e.model.get("choices"),function(t,i){"!"===i[0]&&e.options.filterView.choices.add(new u["default"].Model({id:i,text:t}))}),e.updateLists(),e.$el.removeClass("fetching"),e.$(".navigator-filter-search").removeClass("fetching-error")},error:function(){e.showSearchError()}})}else this.resetChoices(),this.updateLists()},showSearchError:function(){this.$el.removeClass("fetching"),this.$(".navigator-filter-search").addClass("fetching-error")},scroll:function(){var e=this,t=this.$(".choices"),i=t.scrollTop()>=t[0].scrollHeight-t.outerHeight();i&&this.options.filterView.choices.fetchNextPage().done(function(){e.updateLists()})},keydown:function(e){-1!==(0,s["default"])([38,40,13]).indexOf(e.keyCode)&&e.preventDefault()},resetChoices:function(){var e=this;this.options.filterView.choices.reset(this.options.filterView.choices.filter(function(e){return e.get("checked")})),s["default"].each(this.model.get("choices"),function(t,i){e.options.filterView.choices.add(new u["default"].Model({id:i,text:t}))})},onShow:function(){f["default"].DetailsChoiceFilterView.prototype.onShow.apply(this,arguments),this.resetChoices(),this.render(),this.$(".navigator-filter-search input").focus()}}),C=f["default"].ChoiceFilterView.extend({initialize:function(e){f["default"].ChoiceFilterView.prototype.initialize.call(this,{detailsView:e&&e.detailsView?e.detailsView:F})},isDefaultValue:function(){return 0===this.getSelected().length},renderInput:function(){var e=this.model.get("value")||[],t=(0,l["default"])("<input>").prop("name",this.model.get("property")).prop("type","hidden").css("display","none").val(e.join());t.appendTo(this.$el)},restoreFromQuery:function(e){var t=s["default"].findWhere(e,{key:this.model.get("property")});this.model.get("choices")&&s["default"].each(this.model.get("choices"),function(i,a){if("!"===a[0]){var n=s["default"].findWhere(e,{key:a.substr(1)});if(null==n)return;t?t.value+=","+a:t={value:a}}}),t&&t.value?(this.model.set("enabled",!0),this.restore(t.value,t)):this.clear()},restore:function(e,t){var i=this;if(s["default"].isString(e)&&(e=e.split(",")),this.choices&&e.length>0){this.model.set({value:e,enabled:!0});var a=s["default"].filter(e,function(e){return"!"===e[0]});a.forEach(function(e){i.choices.add(new u["default"].Model({id:e,text:i.model.get("choices")[e],checked:!0}))}),e=s["default"].reject(e,function(e){return"!"===e[0]}),s["default"].isArray(t.text)&&t.text.length===e.length?this.restoreFromText(e,t.text):this.restoreByRequests(e)}else this.clear()},restoreFromText:function(e,t){var i=this;s["default"].each(e,function(e,a){i.choices.add(new u["default"].Model({id:e,text:t[a],checked:!0}))}),this.onRestore(e)},restoreByRequests:function(e){var t=this,i=s["default"].map(e,function(e){return t.createRequest(e)});l["default"].when.apply(l["default"],i).done(function(){
t.onRestore(e)})},onRestore:function(){this.detailsView.updateLists(),this.renderBase()},clear:function(){this.model.unset("value"),this.choices&&this.choices.reset([]),this.render()},createRequest:function(){}}),k=C.extend({initialize:function(){C.prototype.initialize.call(this,{detailsView:F}),this.choices=new x},createRequest:function(e){var t=this;return l["default"].ajax({url:baseUrl+"/api/resources",type:"GET",data:{resource:e}}).done(function(e){t.selection.add(new u["default"].Model({id:e[0].key,text:e[0].name}))})}}),D=C.extend({initialize:function(){d["default"].BaseFilterView.prototype.initialize.call(this,{detailsView:F}),this.choices=new V},createRequest:function(e){var t=this;return l["default"].ajax({url:baseUrl+"/api/resources",type:"GET",data:{resource:e}}).done(function(e){t.choices.add(new u["default"].Model({id:e[0].key,text:e[0].name,checked:!0}))})}}),_=C.extend({initialize:function(){d["default"].BaseFilterView.prototype.initialize.call(this,{detailsView:F}),this.choices=new b},createRequest:function(e){var t=this;return l["default"].ajax({url:baseUrl+"/api/users/search",type:"GET",data:{q:e}}).done(function(e){t.choices.add(new u["default"].Model({id:e.users[0].login,text:e.users[0].name+" ("+e.users[0].login+")",checked:!0}))})}}),$=C.extend({initialize:function(){d["default"].BaseFilterView.prototype.initialize.call(this,{detailsView:F}),this.selection=new b,this.choices=new b},createRequest:function(e){var t=this;return l["default"].ajax({url:baseUrl+"/api/users/search",type:"GET",data:{q:e}}).done(function(e){t.choices.add(new u["default"].Model({id:e.users[0].login,text:e.users[0].name+" ("+e.users[0].login+")",checked:!0}))})}});t["default"]={Suggestions:w,AjaxSelectDetailsFilterView:F,AjaxSelectFilterView:C,ProjectFilterView:D,ComponentFilterView:k,AssigneeFilterView:_,ReporterFilterView:$}},1018:function(e,t,i){var a=i(387);e.exports=(a["default"]||a).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,a){return'<div class="navigator-filter-search">\n  <input type="text">\n</div>\n<ul class="navigator-filter-select-list choices"></ul>\n<ul class="navigator-filter-select-list opposite"></ul>\n'},useData:!0})},1019:function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(333),l=a(n),r=i(230),s=a(r),o=i(1006),u=a(o),c=i(1010),d=a(c),h=i(1020),f=a(h),p=i(1021),m=a(p),v=u["default"].DetailsFilterView.extend({template:m["default"],events:{"click label[data-id]":"applyFavorite","click .manage label":"manage"},applyFavorite:function(e){var t=(0,l["default"])(e.target).data("id");window.location=baseUrl+this.model.get("favoriteUrl")+"/"+t},manage:function(){window.location=baseUrl+this.model.get("manageUrl")},serializeData:function(){var e=this.model.get("choices"),t=s["default"].sortBy(s["default"].map(e,function(e,t){return{v:e,k:t}}),"v");return s["default"].extend({},this.model.toJSON(),{choicesArray:t})}}),g=d["default"].ChoiceFilterView.extend({template:f["default"],className:"navigator-filter navigator-filter-favorite",initialize:function(){d["default"].ChoiceFilterView.prototype.initialize.call(this,{detailsView:v})},renderValue:function(){return""},renderInput:function(){},isDefaultValue:function(){return!1}});t["default"]={DetailsFavoriteFilterView:v,FavoriteFilterView:g}},1020:function(e,t,i){var a=i(387);e.exports=(a["default"]||a).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,a,n){var l=this.escapeExpression;return'<div class="navigator-filter-favorite-toggle" title="'+l(i(395).call(e,"measure_filter.filter_list",{name:"t",hash:{},data:n}))+'"></div>\n'},useData:!0})},1021:function(e,t,i){var a=i(387);e.exports=(a["default"]||a).template({1:function(e,t,i,a){var n,l='  <ul class="navigator-filter-select-list">\n';return n=t.each.call(e,null!=e?e.choicesArray:e,{name:"each",hash:{},fn:this.program(2,a),inverse:this.noop,data:a}),null!=n&&(l+=n),l+"  </ul>\n"},2:function(e,t,i,a){var n=this.lambda,l=this.escapeExpression;return'      <li>\n        <label data-id="'+l(n(null!=e?e.k:e,e))+'">'+l(n(null!=e?e.v:e,e))+"</label>\n      </li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,a,n){var l,r=this.escapeExpression,s="";return l=i(1022).call(e,null!=e?e.choicesArray:e,{name:"ifNotEmpty",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=l&&(s+=l),s+'<ul class="navigator-filter-select-list">\n  <li class="manage">\n    <label id="manage-favorites">'+r(i(395).call(e,"manage",{name:"t",hash:{},data:n}))+"</label>\n  </li>\n</ul>\n"},useData:!0})},1022:function(e,t){"use strict";e.exports=function(){var e=Array.prototype.slice.call(arguments,0,-1),t=arguments[arguments.length-1],i=e.reduce(function(e,t){return e||t&&t.length>0},!1);return i?t.fn(this):t.inverse(this)}},1023:function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(333),l=a(n),r=i(230),s=a(r),o=i(1006),u=a(o),c=i(1024),d=a(c),h=i(237),f=u["default"].DetailsFilterView.extend({template:d["default"],events:{"change input":"change"},change:function(){var e={},t=this.$("input").eq(0).val(),i=this.$("input").eq(1).val();t.length>0&&(e[this.model.get("propertyFrom")]=t),i.length>0&&(e[this.model.get("propertyTo")]=i),this.model.set("value",e)},populateInputs:function(){var e=this.model.get("value"),t=this.model.get("propertyFrom"),i=this.model.get("propertyTo"),a=s["default"].isObject(e)&&e[t],n=s["default"].isObject(e)&&e[i];this.$("input").eq(0).val(a||""),this.$("input").eq(1).val(n||"")},onShow:function(){this.$(":input:first").focus()}}),p=u["default"].BaseFilterView.extend({initialize:function(){u["default"].BaseFilterView.prototype.initialize.call(this,{detailsView:f})},renderValue:function(){if(this.isDefaultValue())return(0,h.translate)("any");var e=s["default"].values(this.model.get("value"));return e.join(" — ")},renderInput:function(){var e=this.model.get("value"),t=this.model.get("propertyFrom"),i=this.model.get("propertyTo"),a=s["default"].isObject(e)&&e[t],n=s["default"].isObject(e)&&e[i];(0,l["default"])("<input>").prop("name",t).prop("type","hidden").css("display","none").val(a||"").appendTo(this.$el),(0,l["default"])("<input>").prop("name",i).prop("type","hidden").css("display","none").val(n||"").appendTo(this.$el)},isDefaultValue:function(){var e=this.model.get("value"),t=this.model.get("propertyFrom"),i=this.model.get("propertyTo"),a=s["default"].isObject(e)&&e[t],n=s["default"].isObject(e)&&e[i];return!a&&!n},restoreFromQuery:function(e){var t=s["default"].findWhere(e,{key:this.model.get("propertyFrom")}),i=s["default"].findWhere(e,{key:this.model.get("propertyTo")}),a={};(t&&t.value||i&&i.value)&&(t&&t.value&&(a[this.model.get("propertyFrom")]=t.value),i&&i.value&&(a[this.model.get("propertyTo")]=i.value),this.model.set({value:a,enabled:!0}),this.detailsView.populateInputs())},restore:function(e){if(this.choices&&this.selection&&e.length>0){var t=this;this.choices.add(this.selection.models),this.selection.reset([]),s["default"].each(e,function(e){var i=t.choices.findWhere({id:e});i&&(t.selection.add(i),t.choices.remove(i))}),this.detailsView.updateLists(),this.model.set({value:e,enabled:!0})}},formatValue:function(){return this.model.get("value")},clear:function(){this.model.unset("value"),this.detailsView.render()}}),m=p.extend({render:function(){p.prototype.render.apply(this,arguments),this.detailsView.$("input").prop("placeholder","1970-01-31").datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0}).on("change",function(){(0,l["default"])(this).datepicker("setDate",(0,l["default"])(this).val())})},renderValue:function(){if(this.isDefaultValue())return(0,h.translate)("anytime");var e=s["default"].values(this.model.get("value"));return e.join(" — ")}});t["default"]={RangeFilterView:p,DateRangeFilterView:m}},1024:function(e,t,i){var a=i(387);e.exports=(a["default"]||a).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,a,n){var l=this.lambda,r=this.escapeExpression;return'<div class="navigator-filter-details-inner">\n  <input class="navigator-filter-range-input" type="text" name="'+r(l(null!=e?e.propertyFrom:e,e))+'" placeholder="'+r(l(null!=e?e.placeholder:e,e))+'">\n  <label>'+r(i(395).call(e,"to.downcase",{name:"t",hash:{},data:n}))+'</label>\n  <input class="navigator-filter-range-input" type="text" name="'+r(l(null!=e?e.propertyTo:e,e))+'" placeholder="'+r(l(null!=e?e.placeholder:e,e))+'">\n</div>\n'},useData:!0})},1025:function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(333),l=a(n),r=i(230),s=a(r),o=i(1006),u=a(o),c=i(1026),d=a(c),h=u["default"].DetailsFilterView.extend({template:d["default"],events:{"change input":"change"},change:function(e){this.model.set("value",(0,l["default"])(e.target).val())},onShow:function(){u["default"].DetailsFilterView.prototype.onShow.apply(this,arguments),this.$(":input").focus()},serializeData:function(){return s["default"].extend({},this.model.toJSON(),{value:this.model.get("value")||""})}});t["default"]=u["default"].BaseFilterView.extend({initialize:function(){u["default"].BaseFilterView.prototype.initialize.call(this,{detailsView:h})},renderValue:function(){return this.isDefaultValue()?"—":this.model.get("value")},renderInput:function(){(0,l["default"])("<input>").prop("name",this.model.get("property")).prop("type","hidden").css("display","none").val(this.model.get("value")||"").appendTo(this.$el)},isDefaultValue:function(){return!this.model.get("value")},restore:function(e){this.model.set({value:e,enabled:!0})},clear:function(){this.model.unset("value"),this.detailsView.render()}})},1026:function(e,t,i){var a=i(387);e.exports=(a["default"]||a).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,a){var n,l="function",r=t.helperMissing,s=this.escapeExpression;return'<div class="navigator-filter-details-inner">\n  <input type="text" name="'+s((n=null!=(n=t.property||(null!=e?e.property:e))?n:r,typeof n===l?n.call(e,{name:"property",hash:{},data:a}):n))+'" value="'+s((n=null!=(n=t.value||(null!=e?e.value:e))?n:r,typeof n===l?n.call(e,{name:"value",hash:{},data:a}):n))+'">\n</div>\n'},useData:!0})},1027:function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=i(333),l=a(n),r=i(230),s=a(r),o=i(1006),u=a(o),c=i(1028),d=a(c),h=i(237),f=u["default"].DetailsFilterView.extend({template:d["default"],events:{"change :input":"inputChanged"},inputChanged:function(){var e=this.$("[name=metric]").val(),t=0===e.indexOf("new_"),i=this.$("[name=period]"),a=i.val(),n=i.children('[value="0"]'),l={metric:e,metricText:this.$("[name=metric] option:selected").text(),period:a,periodText:this.$("[name=period] option:selected").text(),op:this.$("[name=op]").val(),opText:this.$("[name=op] option:selected").text(),val:this.$("[name=val]").val(),valText:this.$("[name=val]").originalVal()};t?(n.remove(),"0"===a&&(a="1")):0===n.length&&i.prepend(this.periodZeroOption),i.select2("destroy").val(a).select2({width:"100%",minimumResultsForSearch:100}),this.updateDataType(l),this.model.set("value",l)},updateDataType:function(e){var t=s["default"].find(window.SS.metrics,function(t){return t.metric.name===e.metric});t&&(this.$("[name=val]").data("type",t.metric.val_type),"WORK_DUR"===t.metric.val_type&&this.$("[name=val]").prop("placeholder","1d 7h 59min"),"RATING"===t.metric.val_type&&this.$("[name=val]").prop("placeholder","A"))},onRender:function(){var e=this.$("[name=period]").children('[value="0"]').html();this.periodZeroOption='<option value="0">'+e+"</option>";var t=this.model.get("value")||{};this.$("[name=metric]").val(t.metric).select2({width:"100%",placeholder:(0,h.translate)("measure_filter.criteria.metric")}),this.$("[name=period]").val(t.period||0).select2({width:"100%",minimumResultsForSearch:100}),this.$("[name=op]").val(t.op||"eq").select2({width:"60px",placeholder:"=",minimumResultsForSearch:100}),this.updateDataType(t),this.$("[name=val]").val(t.val),this.inputChanged()},onShow:function(){var e=this.$("[name=metric]");""===this.model.get("value").metric?e.select2("open"):e.select2("focus")}});t["default"]=u["default"].BaseFilterView.extend({initialize:function(){u["default"].BaseFilterView.prototype.initialize.call(this,{detailsView:f}),this.groupMetrics()},groupMetrics:function(){var e=s["default"].map(this.model.get("metrics"),function(e){return e.metric}),t=s["default"].sortBy(s["default"].map(s["default"].groupBy(e,"domain"),function(e,t){return{domain:t,metrics:s["default"].sortBy(e,"short_name")}}),"domain");this.model.set("groupedMetrics",t)},renderValue:function(){return this.isDefaultValue()?(0,h.translate)("measure_filter.criteria.metric.not_set"):this.model.get("value").metricText+" "+this.model.get("value").opText+" "+this.model.get("value").valText},renderInput:function(){var e=this,t=this.model.get("value");s["default"].isObject(t)&&t.metric&&t.op&&null!=t.val&&s["default"].each(["metric","period","op","val"],function(i){var a=t[i];"period"===i&&"0"===a&&(a=""),(0,l["default"])("<input>").prop("name",e.model.get("property")+"_"+i).prop("type","hidden").css("display","none").val(a).appendTo(e.$el)})},isDefaultValue:function(){var e=this.model.get("value");return s["default"].isObject(e)?!(e.metric&&e.op&&null!=e.val):!0},restoreFromQuery:function(e){var t=this,i={};s["default"].each(["metric","period","op","val"],function(a){var n=t.model.get("property")+"_"+a,l=s["default"].findWhere(e,{key:n});l&&l.value&&(i[a]=l.value)}),i&&i.metric&&i.op&&null!=i.val&&this.model.set({value:i,enabled:!0})}})},1028:function(e,t,i){var a=i(387);e.exports=(a["default"]||a).template({1:function(e,t,i,a){var n,l=this.lambda,r=this.escapeExpression,s='      <optgroup label="'+r(l(null!=e?e.domain:e,e))+'">\n';return n=t.each.call(e,null!=e?e.metrics:e,{name:"each",hash:{},fn:this.program(2,a),inverse:this.noop,data:a}),null!=n&&(s+=n),s+"      </optgroup>\n"},2:function(e,t,i,a){var n=this.lambda,l=this.escapeExpression;return'          <option value="'+l(n(null!=e?e.name:e,e))+'">'+l(n(null!=e?e.short_name:e,e))+"</option>\n"},4:function(e,t,i,a){var n=this.lambda,l=this.escapeExpression;return'      <option value="'+l(n(a&&a.key,e))+'">'+l(n(e,e))+"</option>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,a,n){var l,r=this.escapeExpression,s='<div class="navigator-filter-details-inner">\n  <select name="metric">\n    <option></option>\n';return l=t.each.call(e,null!=e?e.groupedMetrics:e,{name:"each",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=l&&(s+=l),s+='  </select>\n\n  <select name="period">\n    <option value="0">'+r(i(395).call(e,"value",{name:"t",hash:{},data:n}))+"</option>\n",l=t.each.call(e,null!=e?e.periods:e,{name:"each",hash:{},fn:this.program(4,n),inverse:this.noop,data:n}),null!=l&&(s+=l),s+='  </select>\n\n  <select name="op">\n',l=t.each.call(e,null!=e?e.operations:e,{name:"each",hash:{},fn:this.program(4,n),inverse:this.noop,data:n}),null!=l&&(s+=l),s+'  </select>\n\n  <input type="text" name="val">\n</div>\n'},useData:!0})}});