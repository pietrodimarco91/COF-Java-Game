webpackJsonp([19],{0:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(){return a["default"].get(baseUrl+"/api/permissions/search_templates")}var i=s(333),a=r(i),o=s(1),l=r(o),u=s(153),c=r(u),p=s(1119),d=r(p);window.sonarqube.appStarted.then(function(e){n().done(function(t){var s=document.querySelector(e.el);c["default"].render(l["default"].createElement(d["default"],{permissionTemplates:t.permissionTemplates,componentId:window.sonarqube.componentId,rootQualifiers:e.rootQualifiers}),s)})})},237:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){if(Array.isArray(e)){for(var t=0,s=Array(e.length);t<e.length;t++)s[t]=e[t];return s}return Array.from(e)}function i(e){return Array.isArray(e)?e:Array.from(e)}function a(){for(var e=arguments.length,t=Array(e),s=0;e>s;s++)t[s]=arguments[s];var r=t.join(".");return g[r]||r}function o(e){for(var t=g[e],s=arguments.length,r=Array(s>1?s-1:0),n=1;s>n;n++)r[n-1]=arguments[n];return t?r.reduce(function(e,t,s){return e.replace("{"+s+"}",t)},t):e+"."+r.join(".")}function l(){var e=window.navigator.languages?window.navigator.languages[0]:window.navigator.language,t=e.split("-"),s=i(t),r=s[0],a=s.slice(1);return[r.toLowerCase()].concat(n(a.map(function(e){return e.toUpperCase()}))).join("_")}function u(e){var t=window.baseUrl+"/api/l10n/index?"+(0,m.stringify)(e);return fetch(t,{credentials:"same-origin"}).then(function(e){if(304===e.status)return JSON.parse(localStorage.getItem("l10n.bundle"));if(200===e.status)return e.json();throw new Error(e.status)})}function c(){var e=l(),t=localStorage.getItem("l10n.locale");t!==e&&localStorage.removeItem("l10n.timestamp");var s=localStorage.getItem("l10n.timestamp"),r={locale:e};return null!==s&&(r.ts=s),u(r).then(function(t){var s=(0,v["default"])().format("YYYY-MM-DDTHH:mm:ssZZ");localStorage.setItem("l10n.timestamp",s),localStorage.setItem("l10n.locale",e),localStorage.setItem("l10n.bundle",JSON.stringify(t)),g=t})}function p(e){g=e}function d(){window.t=a,window.tp=o,window.requestMessages=c}function f(e){var t="dashboard."+e+".name",s=a(t);return s!==t?s:e}Object.defineProperty(t,"__esModule",{value:!0}),t.translate=a,t.translateWithParameters=o,t.requestMessages=c,t.resetBundle=p,t.installGlobal=d,t.getLocalizedDashboardName=f;var m=s(238),h=s(241),v=r(h),y=s(230),g=(r(y),{})},238:function(e,t,s){"use strict";t.decode=t.parse=s(239),t.encode=t.stringify=s(240)},239:function(e,t){"use strict";function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,n){t=t||"&",r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var a=/\+/g;e=e.split(t);var o=1e3;n&&"number"==typeof n.maxKeys&&(o=n.maxKeys);var l=e.length;o>0&&l>o&&(l=o);for(var u=0;l>u;++u){var c,p,d,f,m=e[u].replace(a,"%20"),h=m.indexOf(r);h>=0?(c=m.substr(0,h),p=m.substr(h+1)):(c=m,p=""),d=decodeURIComponent(c),f=decodeURIComponent(p),s(i,d)?Array.isArray(i[d])?i[d].push(f):i[d]=[i[d],f]:i[d]=f}return i}},240:function(e,t){"use strict";var s=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,n){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?Object.keys(e).map(function(n){var i=encodeURIComponent(s(n))+r;return Array.isArray(e[n])?e[n].map(function(e){return i+encodeURIComponent(s(e))}).join(t):i+encodeURIComponent(s(e[n]))}).join(t):n?encodeURIComponent(s(n))+r+encodeURIComponent(s(e)):""}},336:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s(1),i=r(n);t["default"]=i["default"].createClass({displayName:"qualifier-icon",render:function(){if(!this.props.qualifier)return null;var e="icon-qualifier-"+this.props.qualifier.toLowerCase();return i["default"].createElement("i",{className:e})}})},337:function(e,t){"use strict";function s(e){return window.baseUrl+"/dashboard?id="+encodeURIComponent(e)}function r(e,t){var s=Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])}).join("|");return window.baseUrl+"/component_issues?id="+encodeURIComponent(e)+"#"+s}function n(e,t,s,r){var n=window.baseUrl+"/drilldown/measures?id="+encodeURIComponent(e)+"&metric="+encodeURIComponent(t);return s&&(n+="&period="+s),r&&(n+="&highlight="+encodeURIComponent(r)),n}function i(e,t,s){var r=window.baseUrl+"/dashboard?id="+encodeURIComponent(e)+"&did="+encodeURIComponent(t);return s&&(r+="&period="+s),r}function a(e,t){return window.baseUrl+"/overview"+t+"?id="+encodeURIComponent(e)}function o(e){return window.baseUrl+"/dashboards?resource="+encodeURIComponent(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.getComponentUrl=s,t.getComponentIssuesUrl=r,t.getComponentDrilldownUrl=n,t.getComponentDashboardUrl=i,t.getComponentFixedDashboardUrl=a,t.getComponentDashboardManagementUrl=o},366:function(e,t,s){var r;/*!
	  Copyright (c) 2015 Jed Watson.
	  Licensed under the MIT License (MIT), see
	  http://jedwatson.github.io/classnames
	*/
!function(){"use strict";function n(){for(var e="",t=0;t<arguments.length;t++){var s=arguments[t];if(s){var r=typeof s;if("string"===r||"number"===r)e+=" "+s;else if(Array.isArray(s))e+=" "+n.apply(null,s);else if("object"===r)for(var a in s)i.call(s,a)&&s[a]&&(e+=" "+a)}}return e.substr(1)}var i={}.hasOwnProperty;"undefined"!=typeof e&&e.exports?e.exports=n:(r=function(){return n}.call(t,s,t,e),!(void 0!==r&&(e.exports=r)))}()},481:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s(333),i=r(n),a=s(374),o=r(a),l="modal";t["default"]=o["default"].ItemView.extend({className:"modal",overlayClassName:"modal-overlay",htmlClassName:"modal-open",events:function(){return{"click .js-modal-close":"onCloseClick"}},onRender:function(){var e=this;this.$el.detach().appendTo((0,i["default"])("body")),(0,i["default"])("html").addClass(this.htmlClassName),this.renderOverlay(),this.keyScope=key.getScope(),key.setScope("modal"),key("escape","modal",function(){return e.destroy(),!1}),this.show(),this.options.large&&this.$el.addClass("modal-large")},show:function(){var e=this;setTimeout(function(){e.$el.addClass("in"),(0,i["default"])("."+e.overlayClassName).addClass("in")},0)},onDestroy:function(){(0,i["default"])("html").removeClass(this.htmlClassName),this.removeOverlay(),key.deleteScope("modal"),key.setScope(this.keyScope)},onCloseClick:function(e){e.preventDefault(),this.destroy()},renderOverlay:function(){var e=(0,i["default"])("."+this.overlayClassName);0===e.length&&(0,i["default"])('<div class="'+this.overlayClassName+'"></div>').appendTo((0,i["default"])("body"))},removeOverlay:function(){(0,i["default"])("."+this.overlayClassName).remove()},attachCloseEvents:function(){var e=this;(0,i["default"])("body").on("click."+l,function(){(0,i["default"])("body").off("click."+l),e.destroy()})}})},614:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s(1),i=r(n);t["default"]=i["default"].createClass({displayName:"radio-toggle",propTypes:{value:i["default"].PropTypes.string,options:i["default"].PropTypes.array.isRequired,name:i["default"].PropTypes.string.isRequired,onCheck:i["default"].PropTypes.func.isRequired},getDefaultProps:function(){return{disabled:!1,value:null}},onChange:function(e){var t=e.currentTarget.value;this.props.onCheck(t)},renderOption:function(e){var t=e.value===this.props.value,s=this.props.name+"__"+e.value;return i["default"].createElement("li",{key:e.value},i["default"].createElement("input",{onChange:this.onChange,type:"radio",name:this.props.name,value:e.value,id:s,checked:t,disabled:this.props.disabled}),i["default"].createElement("label",{htmlFor:s},e.label))},render:function(){var e=this.props.options.map(this.renderOption);return i["default"].createElement("ul",{className:"radio-toggle"},e)}})},660:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s(230),i=r(n),a=s(481),o=r(a);t["default"]=o["default"].extend({ui:function(){return{messagesContainer:".js-modal-messages"}},events:function(){return i["default"].extend(o["default"].prototype.events.apply(this,arguments),{"keydown input,textarea,select":"onInputKeydown","submit form":"onFormSubmit"})},onRender:function(){o["default"].prototype.onRender.apply(this,arguments);var e=this;setTimeout(function(){e.$(":tabbable").first().focus()},0)},onInputKeydown:function(e){27===e.keyCode&&this.destroy()},onFormSubmit:function(e){e.preventDefault()},showErrors:function(e,t){var s=this.ui.messagesContainer.empty();i["default"].isArray(e)&&e.forEach(function(e){var t='<div class="alert alert-danger">'+e.msg+"</div>";s.append(t)}),i["default"].isArray(t)&&t.forEach(function(e){var t='<div class="alert alert-warning">'+e.msg+"</div>";s.append(t)}),this.ui.messagesContainer.scrollParent().scrollTop(0)},disableForm:function(){var e=this.$("form");this.disabledFields=e.find(":input:not(:disabled)"),this.disabledFields.prop("disabled",!0)},enableForm:function(){null!=this.disabledFields&&this.disabledFields.prop("disabled",!1)}})},746:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var n=s(333),i=r(n),a=s(230),o=r(a),l=s(372),u=r(l),c=s(237),p=s(747),d=r(p),f=s(748),m=r(f),h=null,v=u["default"].Collection.extend({initialize:function(e){this.options=e},parse:function(e){return this.options.parse.call(this,e)},fetch:function(e){var t=i["default"].extend({page:1,pageSize:100},e.data||{}),s=i["default"].extend({},e,{data:t});this.settings={url:s.url,data:t},u["default"].Collection.prototype.fetch.call(this,s)},fetchNextPage:function(e){if(this.more){var t=this.settings.data.page+1,s=i["default"].extend(this.settings,e);s.data.page=t,s.remove=!1,this.fetch(s)}else e.error()}}),y=u["default"].View.extend({tagName:"li",template:d["default"],events:{"change .select-list-list-checkbox":"toggle"},initialize:function(e){this.listenTo(this.model,"change",this.render),this.settings=e.settings},render:function(){this.$el.html(this.template(this.settings.format(this.model.toJSON()))),this.$("input").prop("name",this.model.get("name")),this.$el.toggleClass("selected",this.model.get("selected")),this.$(".select-list-list-checkbox").prop("title",this.model.get("selected")?this.settings.tooltips.deselect:this.settings.tooltips.select).prop("checked",this.model.get("selected")),this.settings.readOnly&&this.$(".select-list-list-checkbox").prop("disabled",!0)},remove:function(e){if(e){var t=this;t.$el.addClass(this.model.get("selected")?"added":"removed"),setTimeout(function(){u["default"].View.prototype.remove.call(t,arguments)},500)}else u["default"].View.prototype.remove.call(this,arguments)},toggle:function(){var e=this.model.get("selected"),t=this,s=e?this.settings.deselectUrl:this.settings.selectUrl,r=i["default"].extend({},this.settings.extra||{});r[this.settings.selectParameter]=this.model.get(this.settings.selectParameterValue),t.$el.addClass("progress"),i["default"].ajax({url:s,type:"POST",data:r,statusCode:{400:null,401:null,403:null,500:null}}).done(function(){t.model.set("selected",!e)}).fail(function(e){t.render(),h(e)}).always(function(){t.$el.removeClass("progress")})}}),g=u["default"].View.extend({template:m["default"],events:{"click .select-list-control-button[name=selected]":"showSelected","click .select-list-control-button[name=deselected]":"showDeselected","click .select-list-control-button[name=all]":"showAll"},initialize:function(e){this.listenTo(this.collection,"add",this.renderListItem),this.listenTo(this.collection,"reset",this.renderList),this.listenTo(this.collection,"remove",this.removeModel),this.listenTo(this.collection,"change:selected",this.confirmFilter),this.settings=e.settings;var t=this;this.showFetchSpinner=function(){t.$listContainer.addClass("loading")},this.hideFetchSpinner=function(){t.$listContainer.removeClass("loading")};var s=function(){t.showFetchSpinner(),t.collection.fetchNextPage({success:function(){t.hideFetchSpinner()},error:function(){t.hideFetchSpinner()}})};this.onScroll=o["default"].throttle(s,1e3)},render:function(){var e=this,t=function(){e.search()};this.$el.html(this.template(this.settings.labels)).width(this.settings.width),this.$listContainer=this.$(".select-list-list-container"),this.settings.readOnly?this.$listContainer.addClass("select-list-list-container-readonly"):this.$listContainer.height(this.settings.height).css("overflow","auto").on("scroll",function(){e.scroll()}),this.$list=this.$(".select-list-list");var s=this.$(".select-list-search-control input").on("keyup",o["default"].debounce(t,250)).on("search",o["default"].debounce(t,250));this.settings.focusSearch&&setTimeout(function(){s.focus()},250),this.listItemViews=[],h=function(t){var s=(0,c.translate)("default_error_message");null!=t&&null!=t.responseJSON&&null!=t.responseJSON.errors&&(s=o["default"].pluck(t.responseJSON.errors,"msg").join(". ")),e.$el.prevAll(".alert").remove(),(0,i["default"])("<div>").addClass("alert alert-danger").text(s).insertBefore(e.$el)},this.settings.readOnly&&this.$(".select-list-control").remove()},renderList:function(){this.listItemViews.forEach(function(e){e.remove()}),this.listItemViews=[],this.collection.length>0?this.collection.each(this.renderListItem,this):this.settings.readOnly&&this.renderEmpty(),this.$listContainer.scrollTop(0)},renderListItem:function(e){var t=new y({model:e,settings:this.settings});this.listItemViews.push(t),this.$list.append(t.el),t.render()},renderEmpty:function(){this.$list.append('<li class="empty-message">'+this.settings.labels.noResults+"</li>")},confirmFilter:function(e){"all"!==this.currentFilter&&this.collection.remove(e)},removeModel:function(e,t,s){this.listItemViews[s.index].remove(!0),this.listItemViews.splice(s.index,1)},filterBySelection:function(e){var t=this;e=this.currentFilter=e||this.currentFilter,null!=e&&(this.$(".select-list-check-control").toggleClass("disabled",!1),this.$(".select-list-search-control").toggleClass("disabled",!0),this.$(".select-list-search-control input").val(""),this.$(".select-list-control-button").removeClass("active").filter("[name="+e+"]").addClass("active"),this.showFetchSpinner(),this.collection.fetch({url:this.settings.searchUrl,reset:!0,data:{selected:e},success:function(){t.hideFetchSpinner()},error:h}))},showSelected:function(){this.filterBySelection("selected")},showDeselected:function(){this.filterBySelection("deselected")},showAll:function(){this.filterBySelection("all")},search:function(){var e=this.$(".select-list-search-control input").val(),t=e.length>0,s=this,r={};this.$(".select-list-check-control").toggleClass("disabled",t),this.$(".select-list-search-control").toggleClass("disabled",!t),t?(this.showFetchSpinner(),this.currentFilter="all",r[this.settings.queryParam]=e,r.selected="all",this.collection.fetch({url:this.settings.searchUrl,reset:!0,data:r,success:function(){s.hideFetchSpinner()},error:h})):this.filterBySelection()},searchByQuery:function(e){this.$(".select-list-search-control input").val(e),this.search()},clearSearch:function(){this.filterBySelection()},scroll:function(){var e=this.$listContainer.scrollTop()>=this.$list[0].scrollHeight-this.$listContainer.outerHeight();e&&this.collection.more&&this.onScroll()}});window.SelectList=function(e){return this.settings=i["default"].extend(window.SelectList.defaults,e),this.collection=new v({parse:this.settings.parse}),this.view=new g({el:this.settings.el,collection:this.collection,settings:this.settings}),this.view.render(),this.filter("selected"),this},window.SelectList.prototype.filter=function(e){return this.view.filterBySelection(e),this},window.SelectList.prototype.search=function(e){return this.view.searchByQuery(e),this},window.SelectList.defaults={width:"50%",height:400,readOnly:!1,focusSearch:!0,format:function(e){return e.value},parse:function(e){return this.more=e.more,e.results},queryParam:"query",labels:{selected:"Selected",deselected:"Deselected",all:"All",noResults:""},tooltips:{select:"Click this to select item",deselect:"Click this to deselect item"},errorMessage:"Something gone wrong, try to reload the page and try again."}},747:function(e,t,s){var r=s(387);e.exports=(r["default"]||r).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,s,r){var n,i=this.lambda,a='<input class="select-list-list-checkbox" type="checkbox">\n<div class="select-list-list-item">';return n=i(e,e),null!=n&&(a+=n),a+"</div>\n"},useData:!0})},748:function(e,t,s){var r=s(387);e.exports=(r["default"]||r).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,s,r){var n=this.lambda,i=this.escapeExpression;return'<div class="select-list-container">\n  <div class="select-list-control">\n    <div class="select-list-check-control">\n      <a class="select-list-control-button" name="selected">'+i(n(null!=e?e.selected:e,e))+'</a><a class="select-list-control-button" name="deselected">'+i(n(null!=e?e.deselected:e,e))+'</a><a class="select-list-control-button" name="all">'+i(n(null!=e?e.all:e,e))+'</a>\n    </div>\n    <div class="select-list-search-control">\n      <form class="search-box">\n        <span class="search-box-submit button-clean"><i class="icon-search"></i></span>\n        <input class="search-box-input" type="search" name="q" placeholder="Search" maxlength="100" autocomplete="off">\n      </form>\n    </div>\n  </div>\n  <div class="select-list-list-container">\n    <ul class="select-list-list"></ul>\n  </div>\n</div>\n'},useData:!0})},1106:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){return j["default"].ajax(e)}function i(e){return window.baseUrl+e}function a(e,t){throw new TypeError("permissions#"+e+": "+t)}function o(e){var t=i("/api/permissions/users");return n({type:"GET",url:t,data:e})}function l(e,t,s){if("string"!=typeof e||!e.length)return a("grantToUser","please provide permission");if("string"!=typeof t||!t.length)return a("grantToUser","please provide user login");var r=i("/api/permissions/add_user"),o={permission:e,login:t};return s&&(o.projectId=s),n({type:"POST",url:r,data:o})}function u(e,t,s){if("string"!=typeof e||!e.length)return a("revokeFromUser","please provide permission");if("string"!=typeof t||!t.length)return a("revokeFromUser","please provide user login");var r=i("/api/permissions/remove_user"),o={permission:e,login:t};return s&&(o.projectId=s),n({type:"POST",url:r,data:o})}function c(e){var t=i("/api/permissions/groups");return n({type:"GET",url:t,data:e})}function p(e,t,s){if("string"!=typeof e||!e.length)return a("grantToGroup","please provide permission");if("string"!=typeof t||!t.length)return a("grantToGroup","please provide group name");var r=i("/api/permissions/add_group"),o={permission:e,groupName:t};return s&&(o.projectId=s),n({type:"POST",url:r,data:o})}function d(e,t,s){if("string"!=typeof e||!e.length)return a("revokeFromGroup","please provide permission");if("string"!=typeof t||!t.length)return a("revokeFromGroup","please provide group name");var r=i("/api/permissions/remove_group"),o={permission:e,groupName:t};return s&&(o.projectId=s),n({type:"POST",url:r,data:o})}function f(e){var t=i("/api/permissions/search_templates"),s={};return e&&(s.q=e),n({type:"GET",url:t,data:s})}function m(e){var t=i("/api/permissions/create_template");return n(_["default"].extend({type:"POST",url:t},e))}function h(e){var t=i("/api/permissions/update_template");return n(_["default"].extend({type:"POST",url:t},e))}function v(e){var t=i("/api/permissions/delete_template");return n(_["default"].extend({type:"POST",url:t},e))}function y(e,t){if("string"!=typeof e||!e.length)return a("setDefaultPermissionTemplate","please provide permission template ID");var s=i("/api/permissions/set_default_template"),r={templateId:e,qualifier:t};return n({type:"POST",url:s,data:r})}function g(e){var t=i("/api/permissions/apply_template");return n(_["default"].extend({type:"POST",url:t},e))}Object.defineProperty(t,"__esModule",{value:!0}),t.getUsers=o,t.grantToUser=l,t.revokeFromUser=u,t.getGroups=c,t.grantToGroup=p,t.revokeFromGroup=d,t.getPermissionTemplates=f,t.createPermissionTemplate=m,t.updatePermissionTemplate=h,t.deletePermissionTemplate=v,t.setDefaultPermissionTemplate=y,t.applyTemplateToProject=g;var b=s(333),j=r(b),w=s(230),_=r(w)},1119:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},i=s(333),a=r(i),o=s(230),l=r(o),u=s(1),c=r(u),p=s(1120),d=r(p),f=s(1129),m=r(f),h=s(1130),v=r(h),y=s(1127),g=r(y),b=s(237),j=["user","codeviewer","issueadmin","admin","scan"];t["default"]=c["default"].createClass({displayName:"main",propTypes:{permissionTemplates:c["default"].PropTypes.arrayOf(c["default"].PropTypes.object).isRequired},getInitialState:function(){return{ready:!1,permissions:[],projects:[],total:0,filter:"__ALL__"}},componentDidMount:function(){this.requestPermissions()},sortPermissions:function(e){return l["default"].sortBy(e,function(e){return j.indexOf(e.key)})},mergePermissionsToProjects:function(e,t){return e.map(function(e){var s=t.map(function(t){var s=l["default"].findWhere(e.permissions,{key:t.key});return l["default"].extend({usersCount:0,groupsCount:0},t,s)});return l["default"].extend({},e,{permissions:s})})},requestPermissions:function(){var e=arguments.length<=0||void 0===arguments[0]?1:arguments[0],t=this,s=arguments.length<=1||void 0===arguments[1]?"":arguments[1],r=arguments.length<=2||void 0===arguments[2]?this.state.filter:arguments[2],n=window.baseUrl+"/api/permissions/search_project_permissions",i={p:e,q:s};"__ALL__"!==r&&(i.qualifier=r),this.props.componentId&&(i={projectId:this.props.componentId}),this.setState({ready:!1},function(){a["default"].get(n,i).done(function(n){var i=t.sortPermissions(n.permissions),a=t.mergePermissionsToProjects(n.projects,i);e>1&&(a=[].concat(t.state.projects,a)),t.setState({ready:!0,projects:a,permissions:i,total:n.paging.total,page:n.paging.pageIndex,query:s,filter:r})})})},loadMore:function(){this.requestPermissions(this.state.page+1,this.state.query)},search:function(e){this.requestPermissions(1,e)},handleFilter:function(e){this.requestPermissions(1,this.state.query,e)},refresh:function(){this.requestPermissions(1,this.state.query)},bulkApplyTemplate:function(e){e.preventDefault(),new g["default"]({projects:this.state.projects,permissionTemplates:this.props.permissionTemplates,refresh:this.requestPermissions}).render()},renderBulkApplyButton:function(){return this.props.componentId?null:c["default"].createElement("button",{onClick:this.bulkApplyTemplate,className:"js-bulk-apply-template"},"Bulk Apply Template")},renderSpinner:function(){return this.state.ready?null:c["default"].createElement("i",{className:"spinner"})},render:function(){return c["default"].createElement("div",{className:"page"},c["default"].createElement("header",{id:"project-permissions-header",className:"page-header"},c["default"].createElement("h1",{className:"page-title"},(0,b.translate)("roles.page")),this.renderSpinner(),c["default"].createElement("div",{className:"page-actions"},this.renderBulkApplyButton()),c["default"].createElement("p",{className:"page-description"},(0,b.translate)("roles.page.description2"))),c["default"].createElement(v["default"],n({},this.props,{filter:this.state.filter,search:this.search,onFilter:this.handleFilter})),c["default"].createElement(d["default"],{ready:this.state.ready,projects:this.state.projects,permissions:this.state.permissions,permissionTemplates:this.props.permissionTemplates,refresh:this.refresh}),c["default"].createElement(m["default"],n({},this.props,{ready:this.state.ready,count:this.state.projects.length,total:this.state.total,loadMore:this.loadMore})))}})},1120:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s(366),i=r(n),a=s(1),o=r(a),l=s(1121),u=r(l),c=s(1122),p=r(c);t["default"]=o["default"].createClass({displayName:"permissions",propTypes:{projects:o["default"].PropTypes.arrayOf(o["default"].PropTypes.object).isRequired,permissions:o["default"].PropTypes.arrayOf(o["default"].PropTypes.object).isRequired,permissionTemplates:o["default"].PropTypes.arrayOf(o["default"].PropTypes.object).isRequired,refresh:o["default"].PropTypes.func.isRequired},render:function(){var e=this,t=this.props.projects.map(function(t){return o["default"].createElement(p["default"],{key:t.id,project:t,permissionTemplates:e.props.permissionTemplates,refresh:e.props.refresh})}),s=(0,i["default"])("data zebra",{"new-loading":!this.props.ready});return o["default"].createElement("table",{id:"projects",className:s},o["default"].createElement(u["default"],{permissions:this.props.permissions}),o["default"].createElement("tbody",null,t))}})},1121:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s(1),i=r(n);t["default"]=i["default"].createClass({displayName:"permissions-header",propTypes:{permissions:i["default"].PropTypes.arrayOf(i["default"].PropTypes.object).isRequired},render:function(){var e=80/this.props.permissions.length+"%",t=this.props.permissions.map(function(t){return i["default"].createElement("th",{key:t.key,style:{width:e}},t.name,i["default"].createElement("br",null),i["default"].createElement("span",{className:"small"},t.description))});return i["default"].createElement("thead",null,i["default"].createElement("tr",null,i["default"].createElement("th",{style:{width:"20%"}}," "),t,i["default"].createElement("th",{className:"thin"}," ")))}})},1122:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s(1),i=r(n),a=s(1123),o=r(a),l=s(1125),u=r(l),c=s(1127),p=r(c),d=s(337),f=s(336),m=r(f);t["default"]=i["default"].createClass({displayName:"project",propTypes:{project:i["default"].PropTypes.object.isRequired,permissionTemplates:i["default"].PropTypes.arrayOf(i["default"].PropTypes.object).isRequired,refresh:i["default"].PropTypes.func.isRequired},showGroups:function(e,t){t.preventDefault(),new u["default"]({permission:e,project:this.props.project.id,projectName:this.props.project.name,refresh:this.props.refresh}).render()},showUsers:function(e,t){t.preventDefault(),new o["default"]({permission:e,project:this.props.project.id,projectName:this.props.project.name,refresh:this.props.refresh}).render()},applyTemplate:function(e){e.preventDefault(),new p["default"]({permissionTemplates:this.props.permissionTemplates,project:this.props.project,refresh:this.props.refresh}).render()},render:function(){var e=this,t=this.props.project.permissions.map(function(t){return i["default"].createElement("td",{key:t.key},i["default"].createElement("table",null,i["default"].createElement("tbody",null,i["default"].createElement("tr",null,i["default"].createElement("td",{className:"spacer-right"},"Users"),i["default"].createElement("td",{className:"spacer-left bordered-left"},t.usersCount),i["default"].createElement("td",{className:"spacer-left"},i["default"].createElement("a",{onClick:e.showUsers.bind(e,t.key),className:"icon-bullet-list",title:"Update Users","data-toggle":"tooltip",href:"#"}))),i["default"].createElement("tr",null,i["default"].createElement("td",{className:"spacer-right"},"Groups"),i["default"].createElement("td",{className:"spacer-left bordered-left"},t.groupsCount),i["default"].createElement("td",{className:"spacer-left"},i["default"].createElement("a",{onClick:e.showGroups.bind(e,t.key),className:"icon-bullet-list",title:"Update Users","data-toggle":"tooltip",href:"#"}))))))});return i["default"].createElement("tr",null,i["default"].createElement("td",null,i["default"].createElement("span",{className:"little-spacer-right"},i["default"].createElement(m["default"],{qualifier:this.props.project.qualifier})),i["default"].createElement("a",{href:(0,d.getComponentUrl)(this.props.project.key)},this.props.project.name)),t,i["default"].createElement("td",{className:"thin nowrap text-right"},i["default"].createElement("button",{onClick:this.applyTemplate,className:"js-apply-template"},"Apply Template")))}})},1123:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s(230),i=r(n),a=s(481),o=r(a);s(746);var l=s(1124),u=r(l);t["default"]=o["default"].extend({template:u["default"],onRender:function(){o["default"].prototype.onRender.apply(this,arguments);var e=baseUrl+"/api/permissions/users?ps=100&permission="+this.options.permission+"&projectId="+this.options.project;new window.SelectList({el:this.$("#project-permissions-users"),width:"100%",readOnly:!1,focusSearch:!1,format:function(e){return e.name+'<br><span class="note">'+e.login+"</span>"},queryParam:"q",searchUrl:e,selectUrl:baseUrl+"/api/permissions/add_user",deselectUrl:baseUrl+"/api/permissions/remove_user",extra:{permission:this.options.permission,projectId:this.options.project},selectParameter:"login",selectParameterValue:"login",parse:function(e){return this.more=!1,e.users}})},onDestroy:function(){this.options.refresh&&this.options.refresh(),o["default"].prototype.onDestroy.apply(this,arguments)},serializeData:function(){return i["default"].extend(o["default"].prototype.serializeData.apply(this,arguments),{projectName:this.options.projectName})}})},1124:function(e,t,s){var r=s(387);e.exports=(r["default"]||r).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,s,r){var n,i="function",a=t.helperMissing,o=this.escapeExpression;return'<div class="modal-head">\n  <h2>Update Users of "'+o((n=null!=(n=t.projectName||(null!=e?e.projectName:e))?n:a,typeof n===i?n.call(e,{name:"projectName",hash:{},data:r}):n))+'"</h2>\n</div>\n<div class="modal-body">\n  <div class="js-modal-messages"></div>\n  <div id="project-permissions-users"></div>\n</div>\n<div class="modal-foot">\n  <a href="#" class="js-modal-close">Done</a>\n</div>\n'},useData:!0})},1125:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e,t){return baseUrl+"/api/permissions/groups?ps=100&permission="+e+"&projectId="+t}Object.defineProperty(t,"__esModule",{value:!0});var i=s(230),a=r(i),o=s(481),l=r(o);s(746);var u=s(1126),c=r(u);t["default"]=l["default"].extend({template:c["default"],onRender:function(){l["default"].prototype.onRender.apply(this,arguments),new window.SelectList({el:this.$("#project-permissions-groups"),width:"100%",readOnly:!1,focusSearch:!1,format:function(e){return e.name},queryParam:"q",searchUrl:n(this.options.permission,this.options.project),selectUrl:baseUrl+"/api/permissions/add_group",deselectUrl:baseUrl+"/api/permissions/remove_group",extra:{permission:this.options.permission,projectId:this.options.project},selectParameter:"groupName",selectParameterValue:"name",parse:function(e){return this.more=!1,e.groups}})},onDestroy:function(){this.options.refresh&&this.options.refresh(),l["default"].prototype.onDestroy.apply(this,arguments)},serializeData:function(){return a["default"].extend(l["default"].prototype.serializeData.apply(this,arguments),{projectName:this.options.projectName})}})},1126:function(e,t,s){var r=s(387);e.exports=(r["default"]||r).template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,s,r){var n,i="function",a=t.helperMissing,o=this.escapeExpression;return'<div class="modal-head">\n  <h2>Update Groups of "'+o((n=null!=(n=t.projectName||(null!=e?e.projectName:e))?n:a,typeof n===i?n.call(e,{name:"projectName",hash:{},data:r}):n))+'"</h2>\n</div>\n<div class="modal-body">\n  <div class="js-modal-messages"></div>\n  <div id="project-permissions-groups"></div>\n</div>\n<div class="modal-foot">\n  <a href="#" class="js-modal-close">Done</a>\n</div>\n'},useData:!0})},1127:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s(333),i=r(n),a=s(230),o=r(a),l=s(660),u=r(l),c=s(1106),p=s(1128),d=r(p);t["default"]=u["default"].extend({template:d["default"],onRender:function(){u["default"].prototype.onRender.apply(this,arguments),this.$("#project-permissions-template").select2({width:"250px",minimumResultsForSearch:20})},onFormSubmit:function(){u["default"].prototype.onFormSubmit.apply(this,arguments);var e=this;this.disableForm();var t=this.options.project?[this.options.project]:this.options.projects,s=this.$("#project-permissions-template").val(),r=i["default"].Deferred().resolve();t.forEach(function(e){r=r.then(function(){return(0,c.applyTemplateToProject)({data:{projectId:e.id,templateId:s}})})}),r.done(function(){e.options.refresh(),e.destroy()}).fail(function(t){e.enableForm(),e.showErrors(t.responseJSON.errors,t.responseJSON.warnings)})},serializeData:function(){return o["default"].extend(u["default"].prototype.serializeData.apply(this,arguments),{permissionTemplates:this.options.permissionTemplates,project:this.options.project,projectsCount:o["default"].size(this.options.projects)})}})},1128:function(e,t,s){var r=s(387);e.exports=(r["default"]||r).template({1:function(e,t,s,r){var n,i=this.lambda,a=this.escapeExpression;return'      <h2>Apply Permission Template to "'+a(i(null!=(n=null!=e?e.project:e)?n.name:n,e))+'"</h2>\n'},3:function(e,t,s,r){return"      <h2>Bulk Apply Permission Template</h2>\n"},5:function(e,t,s,r){var n,i="function",a=t.helperMissing,o=this.escapeExpression;return'          <option value="'+o((n=null!=(n=t.id||(null!=e?e.id:e))?n:a,typeof n===i?n.call(e,{name:"id",hash:{},data:r}):n))+'">'+o((n=null!=(n=t.name||(null!=e?e.name:e))?n:a,typeof n===i?n.call(e,{name:"name",hash:{},data:r}):n))+"</option>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,s,r){var n,i='<form id="project-permissions-apply-template-form" autocomplete="off">\n  <div class="modal-head">\n';return n=t["if"].call(e,null!=e?e.project:e,{name:"if",hash:{},fn:this.program(1,r),inverse:this.program(3,r),data:r}),null!=n&&(i+=n),i+='  </div>\n  <div class="modal-body">\n    <div class="js-modal-messages"></div>\n\n    <div class="modal-field">\n      <label for="project-permissions-template">Template<em class="mandatory">*</em></label>\n      <select id="project-permissions-template">\n',n=t.each.call(e,null!=e?e.permissionTemplates:e,{name:"each",hash:{},fn:this.program(5,r),inverse:this.noop,data:r}),null!=n&&(i+=n),i+'      </select>\n    </div>\n  </div>\n  <div class="modal-foot">\n    <button id="project-permissions-apply-template">Apply</button>\n    <a href="#" class="js-modal-close">Cancel</a>\n  </div>\n</form>\n'},useData:!0})},1129:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s(366),i=r(n),a=s(1),o=r(a);t["default"]=o["default"].createClass({displayName:"permissions-footer",propTypes:{count:o["default"].PropTypes.number.isRequired,total:o["default"].PropTypes.number.isRequired,loadMore:o["default"].PropTypes.func.isRequired},handleLoadMore:function(e){e.preventDefault(),this.props.loadMore()},render:function(){if(this.props.componentId)return null;var e=this.props.total>this.props.count,t=o["default"].createElement("a",{onClick:this.handleLoadMore,className:"spacer-left",href:"#"},"show more"),s=(0,i["default"])("spacer-top note text-center",{"new-loading":!this.props.ready});return o["default"].createElement("footer",{className:s},this.props.count,"/",this.props.total," shown",e?t:null)}})},1130:function(e,t,s){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var n=s(230),i=r(n),a=s(1),o=r(a),l=s(1131);t["default"]=o["default"].createClass({displayName:"search",propTypes:{search:o["default"].PropTypes.func.isRequired},componentWillMount:function(){this.search=i["default"].debounce(this.search,250)},onSubmit:function(e){e.preventDefault(),this.search()},search:function(){var e=this.refs.input.value;this.props.search(e)},render:function(){return this.props.componentId?null:o["default"].createElement("div",{className:"panel panel-vertical bordered-bottom spacer-bottom"},this.props.rootQualifiers.length>1&&o["default"].createElement(l.QualifierFilter,{filter:this.props.filter,rootQualifiers:this.props.rootQualifiers,onFilter:this.props.onFilter}),o["default"].createElement("form",{onSubmit:this.onSubmit,className:"search-box display-inline-block text-top"},o["default"].createElement("button",{className:"search-box-submit button-clean"},o["default"].createElement("i",{className:"icon-search"})),o["default"].createElement("input",{onChange:this.search,ref:"input",className:"search-box-input",type:"search",placeholder:"Search"})))}})},1131:function(e,t,s){
"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function n(e){if(Array.isArray(e)){for(var t=0,s=Array(e.length);t<e.length;t++)s[t]=e[t];return s}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.QualifierFilter=void 0;var i=s(1),a=r(i),o=s(237),l=s(614),u=r(l),c=function(e){return e.map(function(e){return{value:e,label:(0,o.translate)("qualifiers",e)}})};t.QualifierFilter=function(e){var t=e.rootQualifiers,s=e.filter,r=e.onFilter,i=[{value:"__ALL__",label:"All"}].concat(n(c(t)));return a["default"].createElement("div",{className:"display-inline-block text-top nowrap big-spacer-right"},a["default"].createElement(u["default"],{value:s,options:i,name:"qualifier",onCheck:r}))}}});